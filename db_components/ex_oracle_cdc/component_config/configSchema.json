{
  "type": "object",
  "title": "Authorization",
  "required": [
    "db_settings"
  ],
  "properties": {
    "db_settings": {
      "type": "object",
      "format": "grid-strict",
      "title": "Authorization",
      "description": "The connector is based on Debezium Connector, for the Oracle setup follow the official <a href=\"https://debezium.io/documentation/reference/stable/connectors/postgresql.html#postgresql-permissions\">instructions</a>",
      "required": [
        "#password",
        "host",
        "port",
        "user",
        "database"
      ],
      "properties": {
        "host": {
          "type": "string",
          "title": "Hostname",
          "propertyOrder": 1,
          "options": {
            "grid_columns": 8
          }
        },
        "port": {
          "type": "integer",
          "title": "Port",
          "default": 1521,
          "propertyOrder": 10,
          "options": {
            "grid_columns": 4
          }
        },
        "user": {
          "type": "string",
          "title": "User",
          "propertyOrder": 20,
          "options": {
            "grid_columns": 12
          }
        },
        "#password": {
          "type": "string",
          "title": "Password",
          "format": "password",
          "propertyOrder": 40,
          "options": {
            "grid_columns": 12
          }
        },
        "database": {
          "type": "string",
          "title": "Database",
          "propertyOrder": 50,
          "options": {
            "grid_columns": 12
          }
        },
        "p_database": {
          "type": "string",
          "title": "Pluggable Database Service Name",
          "propertyOrder": 50,
          "options": {
            "grid_columns": 12
          }
        },
        "ssh_options": {
          "type": "object",
          "format": "ssh-editor",
          "propertyOrder": 60
        },
        "test_connection": {
          "type": "button",
          "format": "test-connection",
          "propertyOrder": 500
        }
      },
      "propertyOrder": 1
    },
    "source_settings": {
      "title": "Data Source",
      "type": "object",
      "propertyOrder": 10,
      "properties": {
        "schemas": {
          "type": "array",
          "title": "Schemas",
          "items": {
            "enum": [],
            "type": "string"
          },
          "format": "select",
          "uniqueItems": true,
          "options": {
            "async": {
              "label": "Re-load schemas",
              "action": "get_schemas",
              "autoload": [
                "parameters.db_settings.user",
                "parameters.db_settings.#password",
                "parameters.db_settings.database"
              ]
            }
          },
          "propertyOrder": 100
        },
        "tables": {
          "type": "array",
          "title": "Tables to sync",
          "description": "If left empty all tables are synced.",
          "items": {
            "enum": [],
            "type": "string"
          },
          "format": "select",
          "uniqueItems": true,
          "options": {
            "async": {
              "label": "Re-load tables",
              "action": "get_tables",
              "autoload": [
                "parameters.source_settings.schemas"
              ]
            }
          },
          "propertyOrder": 102
        },
        "column_filter_type": {
            "type": "string",
            "title": "Column Filter Type",
            "description": "If not specified all columns are synced. Define filters as list of regular expressions that match the fully-qualified names of columns that should be included or excluded from change event record values.",
            "enum": [
              "none",
              "exclude",
              "include"
            ],
            "default": "none",
            "propertyOrder": 103
          },
        "column_filter": {
            "title": "Column List",
            "type": "array",
            "format": "select",
            "uniqueItems": true,
            "options": {
              "dependencies": {
                "column_filter_type": [
                  "exclude",
                  "include"
                ]
              },
              "tags": true,
              "tooltip": "(comma separated list) of fully-qualified names for columns are of the form `schemaName.tableName.columnName`.\n\nTo match the name of a column, connector applies the regular expression that you specify as an **anchored regular expression**. That is, the expression is used to match the entire name string of the column; it does not match substrings that might be present in a column name.",
              "inputAttributes": {
                "placeholder": "schemaName.tableName.columnName"
              }
            },
            "description": "Define filters as list of regular expressions that match the fully-qualified names of columns that should be filtered in change event record values.",
            "items": {
              "type": "string"
            },
            "propertyOrder": 105
          }
      }
    },
    "sync_options": {
      "title": "Sync Options",
      "type": "object",
      "propertyOrder": 10,
      "properties": {
        "snapshot_mode": {
          "type": "string",
          "title": "Replication Mode",
          "description": "The mode 'Changes Only' will skip the initial full sync. Standard mode performs full sync of the tables on the first run.",
          "propertyOrder": 1,
          "enum": [
            "initial",
            "never"
          ],
          "options": {
            "enum_titles": [
              "Standard",
              "Changes only"
            ]
          }
        },
        "snapshot_fetch_size": {
          "type": "integer",
          "title": "Snapshot Fetch Size",
          "description": "During a snapshot, the connector reads table content in batches of rows. This property specifies the maximum number of rows in a batch.",
          "default": 10240,
          "propertyOrder": 2
        },
        "snapshot_threads": {
          "type": "integer",
          "title": "Snapshot parallelism",
          "description": "Specifies the number of threads that the connector uses when performing an initial snapshot. To enable parallel initial snapshots, set the property to a value greater than 1. In a parallel initial snapshot, the connector processes multiple tables concurrently.",
          "default": 1,
          "propertyOrder": 10
        },
        "enable_heartbeat": {
          "type": "boolean",
          "format": "checkbox",
          "title": "Enable Heartbeat",
          "description": "For connectors that use non-CDB mode to connect to Oracle, you can enable heartbeat to force the connector to emit a heartbeat event at regular intervals so that offsets remain synchronized.",
          "default": false,
          "propertyOrder": 40
        },
        "heartbeat_config": {
          "type": "object",
          "title": "Heartbeat Configuration",
          "options": {
            "dependencies": {
              "enable_heartbeat": true
            },
            "tooltip": "This configuration avoids PostgreSQL disk space consumed by WAL files to spike or increase out of usual proportions that can happen in following scenarios:\n\n- There are many updates in a database that is being tracked but only a tiny number of updates are related to the table(s) and schema(s) for which the connector is capturing changes. This situation can be easily solved with periodic heartbeat events.\n- The PostgreSQL instance contains multiple databases and one of them is a high-traffic database. Debezium captures changes in another database that is low-traffic in comparison to the other database. Debezium then cannot confirm the LSN as replication slots work per-database and Debezium is not invoked. As WAL is shared by all databases, the amount used tends to grow until an event is emitted by the database for which Debezium is capturing changes. \n"
          },
          "propertyOrder": 50,
          "properties": {
            "interval_ms": {
              "type": "integer",
              "title": "Heartbeat Interval [ms]",
              "description": "The interval in milliseconds at which the connector performs the heartbeat action in the source database. If you observe that the heartbeat is not emitted during connector run, you can decrease the interval.",
              "default": 3000,
              "propertyOrder": 10
            },
            "action_query": {
              "type": "string",
              "title": "Action Query",
              "options": {
                "tooltip": "This query will be sent regularly by the connector in the specified Heartbeat interval. **Note that the table must exist** in the source database and be tracked by the connector. \n\n The recommended schema is:  \n\n ```sql\nCREATE SCHEMA IF NOT EXISTS kbc;\nCREATE TABLE kbc.heartbeat (id SERIAL PRIMARY KEY, last_heartbeat TIMESTAMP NOT NULL DEFAULT NOW());\nINSERT INTO kbc.heartbeat (last_heartbeat) VALUES (NOW());\n``` \n\n For more information please refer to the documentation."
              },
              "description": "The query that the connector uses to send heartbeat signals to the source database. The query must be a valid SQL statement that the source database can execute and the heartbeat table must be tracked in the Source settings.",
              "default": "INSERT INTO C##DBZUSER.HEARTBEAT (last_heartbeat) VALUES (SYSDATE)",
              "propertyOrder": 20
            }
          }
        },
        "source_signal_table": {
          "title": "Signalling Table",
          "propertyOrder": 60,
          "type": "string",
          "description": "A system signal table that will be used by to connector to store various signal events and incremental snapshot watermarks.",
          "enum": [],
          "format": "select",
          "options": {
            "tooltip": "You need to create a signaling table by submitting a standard SQL DDL query to the source database. \n\nThe following example shows a `CREATE TABLE` command that creates a three-column `debezium_signal` table: \n\n```sql\nCREATE TABLE debezium_signal (id VARCHAR(42) PRIMARY KEY, type VARCHAR(32) NOT NULL, data VARCHAR(2048) NULL);\n``` \n\n **Note** that the connector must have write access to the signaling table.",
            "async": {
              "label": "Re-load tables",
              "action": "get_tables",
              "autoload": [
                "parameters.source_settings.schemas"
              ]
            }
          }
        },
        "timezone": {
          "title": "Database timezone",
          "propertyOrder": 70,
            "type": "string",
            "description": "The timezone of the database. The connector uses this timezone to interpret the timestamp values that are read from the database.",
          "enum": [
              "MIT", "Pacific/Apia", "Pacific/Niue", "Pacific/Pago_Pago", "America/Adak", "HST",
              "Pacific/Fakaofo", "Pacific/Honolulu", "Pacific/Rarotonga", "Pacific/Tahiti", "Pacific/Marquesas",
              "AST", "America/Anchorage", "Pacific/Gambier", "America/Los_Angeles", "America/Tijuana",
              "America/Vancouver", "PST", "Pacific/Pitcairn", "America/Dawson_Creek", "America/Denver",
              "America/Edmonton", "America/Mazatlan", "America/Phoenix", "MST", "PNT", "America/Belize",
              "America/Chicago", "America/Costa_Rica", "America/El_Salvador", "America/Guatemala",
              "America/Managua", "America/Mexico_City", "America/Regina", "America/Tegucigalpa",
              "America/Winnipeg", "CST", "Pacific/Easter", "Pacific/Galapagos", "America/Bogota",
              "America/Cayman", "America/Grand_Turk", "America/Guayaquil", "America/Havana",
              "America/Indianapolis", "America/Jamaica", "America/Lima", "America/Montreal", "America/Nassau",
              "America/New_York", "America/Panama", "America/Port-au-Prince", "America/Porto_Acre",
              "America/Rio_Branco", "EST", "IET", "America/Anguilla", "America/Antigua", "America/Aruba",
              "America/Asuncion", "America/Barbados", "America/Caracas", "America/Cuiaba", "America/Curacao",
              "America/Dominica", "America/Grenada", "America/Guadeloupe", "America/Guyana", "America/Halifax",
              "America/La_Paz", "America/Manaus", "America/Martinique", "America/Montserrat",
              "America/Port_of_Spain", "America/Puerto_Rico", "America/Santiago", "America/Santo_Domingo",
              "America/St_Kitts", "America/St_Lucia", "America/St_Thomas", "America/St_Vincent",
              "America/Thule", "America/Tortola", "Antarctica/Palmer", "Atlantic/Bermuda", "Atlantic/Stanley",
              "PRT", "America/St_Johns", "CNT", "AGT", "America/Buenos_Aires", "America/Cayenne",
              "America/Fortaleza", "America/Godthab", "America/Miquelon", "America/Montevideo",
              "America/Paramaribo", "America/Sao_Paulo", "BET", "America/Noronha", "Atlantic/South_Georgia",
              "America/Scoresbysund", "Atlantic/Azores", "Atlantic/Cape_Verde", "Atlantic/Jan_Mayen",
              "Africa/Abidjan", "Africa/Accra", "Africa/Banjul", "Africa/Bissau", "Africa/Casablanca",
              "Africa/Conakry", "Africa/Dakar", "Africa/Freetown", "Africa/Lome", "Africa/Monrovia",
              "Africa/Nouakchott", "Africa/Ouagadougou", "Africa/Sao_Tome", "Africa/Timbuktu",
              "Atlantic/Canary", "Atlantic/Faeroe", "Atlantic/Reykjavik", "Atlantic/St_Helena",
              "Europe/Dublin", "Europe/Lisbon", "Europe/London", "GMT", "UTC", "WET", "Africa/Algiers",
              "Africa/Bangui", "Africa/Douala", "Africa/Kinshasa", "Africa/Lagos", "Africa/Libreville",
              "Africa/Luanda", "Africa/Malabo", "Africa/Ndjamena", "Africa/Niamey", "Africa/Porto-Novo",
              "Africa/Tunis", "Africa/Windhoek", "ECT", "Europe/Amsterdam", "Europe/Andorra", "Europe/Belgrade",
              "Europe/Berlin", "Europe/Brussels", "Europe/Budapest", "Europe/Copenhagen", "Europe/Gibraltar",
              "Europe/Luxembourg", "Europe/Madrid", "Europe/Malta", "Europe/Monaco", "Europe/Oslo",
              "Europe/Paris", "Europe/Prague", "Europe/Rome", "Europe/Stockholm", "Europe/Tirane",
              "Europe/Vaduz", "Europe/Vienna", "Europe/Warsaw", "Europe/Zurich", "ART", "Africa/Blantyre",
              "Africa/Bujumbura", "Africa/Cairo", "Africa/Gaborone", "Africa/Harare", "Africa/Johannesburg",
              "Africa/Kigali", "Africa/Lubumbashi", "Africa/Lusaka", "Africa/Maputo", "Africa/Maseru",
              "Africa/Mbabane", "Africa/Tripoli", "Asia/Amman", "Asia/Beirut", "Asia/Damascus", "Asia/Jerusalem",
              "Asia/Nicosia", "CAT", "EET", "Europe/Athens", "Europe/Bucharest", "Europe/Chisinau",
              "Europe/Helsinki", "Europe/Istanbul", "Europe/Kaliningrad", "Europe/Kiev", "Europe/Minsk",
              "Europe/Riga", "Europe/Simferopol", "Europe/Sofia", "Europe/Tallinn", "Europe/Vilnius",
              "Africa/Addis_Ababa", "Africa/Asmera", "Africa/Dar_es_Salaam", "Africa/Djibouti", "Africa/Kampala",
              "Africa/Khartoum", "Africa/Mogadishu", "Africa/Nairobi", "Asia/Aden", "Asia/Baghdad",
              "Asia/Bahrain", "Asia/Kuwait", "Asia/Qatar", "Asia/Riyadh", "EAT", "Europe/Moscow",
              "Indian/Antananarivo", "Indian/Comoro", "Indian/Mayotte", "Asia/Tehran", "MET", "Asia/Aqtau",
              "Asia/Baku", "Asia/Dubai", "Asia/Muscat", "Asia/Tbilisi", "Asia/Yerevan", "Europe/Samara",
              "Indian/Mahe", "Indian/Mauritius", "Indian/Reunion", "NET", "Asia/Kabul", "Asia/Aqtobe",
              "Asia/Ashgabat", "Asia/Ashkhabad", "Asia/Bishkek", "Asia/Dushanbe", "Asia/Karachi",
              "Asia/Tashkent", "Asia/Yekaterinburg", "Indian/Chagos", "Indian/Kerguelen", "Indian/Maldives",
              "PLT", "Asia/Calcutta", "IST", "Asia/Katmandu", "Antarctica/Mawson", "Asia/Almaty", "Asia/Colombo",
              "Asia/Dacca", "Asia/Dhaka", "Asia/Novosibirsk", "Asia/Thimbu", "Asia/Thimphu", "BST",
              "Asia/Rangoon", "Indian/Cocos", "Asia/Bangkok", "Asia/Jakarta", "Asia/Krasnoyarsk",
              "Asia/Phnom_Penh", "Asia/Saigon", "Asia/Vientiane", "Indian/Christmas", "VST", "Antarctica/Casey",
              "Asia/Brunei", "Asia/Hong_Kong", "Asia/Irkutsk", "Asia/Kuala_Lumpur", "Asia/Macao",
              "Asia/Manila", "Asia/Shanghai", "Asia/Singapore", "Asia/Taipei", "Asia/Ujung_Pandang",
              "Asia/Ulaanbaatar", "Asia/Ulan_Bator", "Australia/Perth", "CTT", "Asia/Jayapura", "Asia/Pyongyang",
              "Asia/Seoul", "Asia/Tokyo", "Asia/Yakutsk", "JST", "Pacific/Palau", "ACT",
              "Australia/Adelaide", "Australia/Broken_Hill", "Australia/Darwin", "AET", "Antarctica/DumontDUrville",
              "Asia/Vladivostok", "Australia/Brisbane", "Australia/Hobart", "Australia/Sydney", "Pacific/Guam",
              "Pacific/Port_Moresby", "Pacific/Saipan", "Pacific/Truk", "Australia/Lord_Howe", "Asia/Magadan",
              "Pacific/Efate", "Pacific/Guadalcanal", "Pacific/Kosrae", "Pacific/Noumea", "Pacific/Ponape",
              "SST", "Pacific/Norfolk", "Antarctica/McMurdo", "Asia/Anadyr", "Asia/Kamchatka", "NST",
              "Pacific/Auckland", "Pacific/Fiji", "Pacific/Funafuti", "Pacific/Majuro", "Pacific/Nauru",
              "Pacific/Tarawa", "Pacific/Wake", "Pacific/Wallis", "Pacific/Chatham", "Pacific/Enderbury",
              "Pacific/Tongatapu", "Pacific/Kiritimati"
          ]
        },
          "strategy": {
          "type": "string",
          "title": "LogMiner Strategy",
          "description": "Specifies the mining strategy that controls how Oracle LogMiner builds and uses a given data dictionary for resolving table and column ids to names. For description of the strategies please refer to the <a href=\"https://debezium.io/documentation/reference/stable/connectors/oracle.html#oracle-property-log-mining-strategy\">official documentation</a>.",
          "propertyOrder": 80,
          "enum": [
            "redo_log_catalog",
            "online_catalog"
          ]
        }
      }
    },
    "destination": {
      "title": "Destination",
      "type": "object",
      "propertyOrder": 600,
      "required": [
        "load_type"
      ],
      "properties": {
        "load_type": {
          "enum": [
            "incremental_load",
            "full_load",
            "append_incremental",
            "append_full"
          ],
          "type": "string",
          "title": "Load Type",
          "default": "incremental_load",
          "options": {
            "tooltip": "Append modes do not perform deduplication and do not set output table primary key. The result tables will include additional columns: `KBC__EVENT_TIMESTAMP_MS` and `KBC__BATCH_EVENT_ORDER`. \n\n **Note** that changing this parameter after the initial run **may result in errors and drop of the existing tables is recommended** prior changing this parameter.",
            "enum_titles": [
              "Incremental Load - Deduplicated",
              "Full Load - Deduplicated",
              "Incremental Load - Append",
              "Full Load - Append"
            ]
          },
          "description": "If Full load is used, the destination table will be overwritten every run. If Incremental Load is used, data will be upserted into the destination table based on the primary key. Append modes do not contain any primary keys and are not deduplicated.",
          "propertyOrder": 30
        },
        "outputBucket": {
          "type": "string",
          "title": "Output Bucket",
          "default": "",
          "options": {
            "tooltip": "Specify the bucket name **without the stage prefix**. The default bucket name will be used if empty. The result bucket path will be `in.c-<bucket_name>`",
            "placeholder": "my-bucket"
          },
          "description": "(Optional) The name of bucket in Keboola (without the stage prefix) storage where the data. Keboola will create a bucket for you if not specified. The result bucket path will be `in.c-<bucket_name>",
          "propertyOrder": 200
        }
      }
    }
  }
}